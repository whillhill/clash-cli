# clash-cli - Linux ä¸€é”®å®‰è£… Clash ä»£ç†å·¥å…·

![GitHub License](https://img.shields.io/github/license/whillhill/clash-cli)
![GitHub top language](https://img.shields.io/github/languages/top/whillhill/clash-cli)
![GitHub Repo stars](https://img.shields.io/github/stars/whillhill/clash-cli)
![PyPI](https://img.shields.io/pypi/v/clash-cli)
![Python](https://img.shields.io/pypi/pyversions/clash-cli)

ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ Linux Clash ä»£ç†å·¥å…·ï¼Œæ”¯æŒä¸€é”®å®‰è£…ã€é…ç½®å’Œç®¡ç†ã€‚

**ðŸŽ‰ çŽ°å·²æ”¯æŒä¸¤ç§å®‰è£…æ–¹å¼ï¼šShell è„šæœ¬å’Œ Python åŒ…ï¼**

## âœ¨ ç‰¹æ€§

- ðŸš€ **ä¸€é”®å®‰è£…**ï¼šè‡ªåŠ¨ä¸‹è½½å¹¶é…ç½® Clash å†…æ ¸
- ðŸ”§ **æ™ºèƒ½ç®¡ç†**ï¼šç»Ÿä¸€çš„ `clash-cli` å‘½ä»¤è¡Œç•Œé¢
- ðŸŒ **è®¢é˜…è½¬æ¢**ï¼šå†…ç½® subconverter æœ¬åœ°è®¢é˜…è½¬æ¢
- ðŸŽ¯ **å¤šå†…æ ¸æ”¯æŒ**ï¼šé»˜è®¤ mihomoï¼Œå¯é€‰ clash å†…æ ¸
- ðŸš **å¤š Shell æ”¯æŒ**ï¼šå…¼å®¹ bashã€zshã€fish
- ðŸ”’ **ç³»ç»Ÿé›†æˆ**ï¼šsystemd æœåŠ¡ç®¡ç†ï¼Œå¼€æœºè‡ªå¯
- ðŸŒ **Web æŽ§åˆ¶å°**ï¼šå¯è§†åŒ–èŠ‚ç‚¹ç®¡ç†å’Œç›‘æŽ§
- ðŸ“± **Tun æ¨¡å¼**ï¼šå…¨å±€ä»£ç†ï¼Œæ”¯æŒ Docker å®¹å™¨
- ðŸ **Python æ”¯æŒ**ï¼šçŽ°ä»£åŒ–çš„ pip å®‰è£…æ–¹å¼

## ðŸ“‹ çŽ¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**ï¼šCentOS 7+ã€Debian 10+ã€Ubuntu 18.04+
- **ç”¨æˆ·æƒé™**ï¼š`root` æˆ– `sudo` æƒé™
- **Shell çŽ¯å¢ƒ**ï¼š`bash`ã€`zsh`ã€`fish` ä»»ä¸€
- **ç³»ç»ŸæœåŠ¡**ï¼š`systemd` æ”¯æŒ

## ðŸš€ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šPython åŒ…å®‰è£…ï¼ˆæŽ¨èï¼‰

```bash
# å®‰è£…
pip install clash-cli

# ä½¿ç”¨
sudo clash-cli install
clash-cli on
clash-cli status
```

### æ–¹å¼äºŒï¼šShell è„šæœ¬å®‰è£…ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

#### ç›´æŽ¥å®‰è£…

```bash
git clone --branch main --depth 1 https://github.com/whillhill/clash-cli.git \
  && cd clash-cli \
  && sudo bash install.sh
```

#### ä½¿ç”¨åŠ é€Ÿé•œåƒ

```bash
git clone --branch main --depth 1 https://gh-proxy.com/https://github.com/whillhill/clash-cli.git \
  && cd clash-cli \
  && sudo bash install.sh
```

#### å®‰è£…è¿‡ç¨‹è¯´æ˜Ž

1. **ä¸‹è½½é¡¹ç›®**ï¼šå…‹éš†ä»“åº“åˆ°æœ¬åœ°
2. **è¾“å…¥è®¢é˜…**ï¼šå®‰è£…æ—¶è¾“å…¥æ‚¨çš„ Clash è®¢é˜…é“¾æŽ¥
3. **è‡ªåŠ¨é…ç½®**ï¼šè„šæœ¬è‡ªåŠ¨ä¸‹è½½å†…æ ¸ã€é…ç½®æœåŠ¡
4. **å¯åŠ¨æœåŠ¡**ï¼šå®‰è£…å®ŒæˆåŽè‡ªåŠ¨å¯åŠ¨ä»£ç†æœåŠ¡

> ðŸ’¡ **æç¤º**ï¼šä¸¤ç§å®‰è£…æ–¹å¼ä½¿ç”¨ç›¸åŒçš„ Clash å†…æ ¸å’Œé…ç½®ï¼Œå‘½ä»¤å®Œå…¨ä¸€è‡´

## ðŸ“– ä½¿ç”¨æ•™ç¨‹

### Python åŒ…ä½¿ç”¨

å®‰è£… Python åŒ…åŽï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# å®‰è£… Clashï¼ˆéœ€è¦ sudo æƒé™ï¼‰
sudo clash-cli install

# æŒ‡å®šè®¢é˜…é“¾æŽ¥å®‰è£…
sudo clash-cli install -s "https://your-subscription-url.com"

# ä½¿ç”¨ clash å†…æ ¸ï¼ˆé»˜è®¤æ˜¯ mihomoï¼‰
sudo clash-cli install --kernel clash

# åŸºæœ¬æ“ä½œ
clash-cli on          # å¼€å¯ä»£ç†
clash-cli off         # å…³é—­ä»£ç†
clash-cli status      # æŸ¥çœ‹çŠ¶æ€
clash-cli ui          # æŸ¥çœ‹ Web æŽ§åˆ¶å°åœ°å€
```

### Shell è„šæœ¬ä½¿ç”¨

å®‰è£…å®ŒæˆåŽï¼Œä½¿ç”¨ `clash-cli` å‘½ä»¤ç®¡ç†ä»£ç†æœåŠ¡ï¼š

```bash
$ clash-cli
Usage:
    clash-cli COMMAND [OPTION]

Commands:
    on                   ????
    off                  ????
    ui                   ????
    status               ????
    proxy    [on|off]    ????
    tun      [on|off]    Tun ??
    mixin    [-e|-r]     Mixin ??
    secret   [SECRET]    Web ??
    update   [auto|log]  ????
```

### ?? ????

#### ???????

```bash
# ??????
$ clash-cli on
?? ???????

# ??????
$ clash-cli off
?? ???????

# ??????
$ clash-cli status
? mihomo.service - mihomo Daemon, A[nother] Clash Kernel.
   Loaded: loaded (/etc/systemd/system/mihomo.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2025-01-27 10:30:15 CST; 2h 15min ago
```

**??**?
- `clash-cli on` ????????????????????
- `clash-cli off` ??????????????
- ????????????????????

#### ??????

```bash
# ???????????????
$ clash-cli proxy on
?? ???????

# ?????????????
$ clash-cli proxy off
?? ???????

# ??????
$ clash-cli proxy status
?? ???????
http_proxy? http://127.0.0.1:7890
socks_proxy?socks5h://127.0.0.1:7890
```

### ?? Web ???

#### ?????

```bash
$ clash-cli ui
?????????????????????????????????????????????????
?                ?? Web ???                  ?
?????????????????????????????????????????????????
?                                               ?
?     ?? ???????9090                      ?
?     ?? ???http://192.168.0.1:9090/ui       ?
?     ?? ???http://255.255.255.255:9090/ui   ?
?     ?? ???http://board.zash.run.place      ?
?                                               ?
?????????????????????????????????????????????????
```

#### ????

```bash
# ??????
$ clash-cli secret mypassword123
?? ????????????

# ??????
$ clash-cli secret
?? ?????mypassword123

# ?????????
$ clash-cli secret ""
?? ????????????
```

#### Web ?????

- **????**??????????????
- **????**??????????
- **????**???????????
- **????**??????????
- **????**?????????

**????**?
- ??????????????
- ???????????????????
- ??? `allow-lan: false` ???????

### ?? ????

#### ??????

```bash
# ??????????
$ clash-cli update https://your-subscription-url.com
?? ???????????...
?? ???????????...
?? ??????

# ???????????
$ clash-cli update
?? ??????

# ??????
$ clash-cli update log
? [2025-01-27 10:30:15] ???????https://your-subscription-url.com
? [2025-01-27 08:15:22] ???????https://your-subscription-url.com
```

#### ??????

```bash
# ????????2??????
$ clash-cli update auto
?? ?????????

# ???????????????
$ clash-cli update auto https://new-subscription-url.com
?? ?????????

# ??????
$ crontab -l | grep clash-cli
0 0 */2 * * /bin/bash -i -c 'clash-cli update https://your-subscription-url.com'
```

#### ??????

- **????**??? subconverter???????????
- **????**?????????????????
- **????**??? V2Ray?Trojan?SS?SSR ?????
- **????**???????????????????

### ?? Tun ??

#### ?? Tun ??

```bash
# ?? Tun ??
$ clash-cli tun
?? Tun ?????

# ?? Tun ??
$ clash-cli tun on
?? Tun ?????

# ?? Tun ??
$ clash-cli tun off
?? Tun ?????
```

#### Tun ????

**????**?
- **????**???????????
- **????**??? Docker?Podman ???????
- **DNS ??**????? DNS ????? DNS ??
- **????**???????????????

**????**?
- ?????????????
- Docker ???????
- ?????????????????

**????**?
- ?? root ???????
- ???????????
- ?????????????

### ?? ????

#### Mixin ????

```bash
# ?? mixin ??
$ clash-cli mixin
?? less ?? mixin ??

# ?? mixin ??
$ clash-cli mixin -e
?? vim ?? mixin ??

# ?????????????????
$ clash-cli mixin -r
?? less ?? ??? ??
```

#### Mixin ????

**????**?
- **?????**???????? Mixin ???????????
- **????**?????? = ???? + Mixin ??
- **???**?Mixin ?? > ????

**??????**?

```yaml
# ??????
system-proxy:
  enable: true

# Web ???
external-controller: "0.0.0.0:9090"
external-ui: public
secret: "your-password"

# ???????
allow-lan: true
authentication:
  - "username:password"

# ??? DNS
dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  nameserver:
    - 114.114.114.114
    - 8.8.8.8

# ?????
rules:
  - DOMAIN-SUFFIX,example.com,DIRECT
  - DOMAIN-KEYWORD,google,PROXY
```

## ?? ????

### ????

#### ??????
```bash
# ????????
$ clash-cli status -l
$ journalctl -u mihomo -f

# ??????
$ clash-cli mixin -r
```

#### ??????
```bash
# ??????
$ netstat -tlnp | grep :7890
$ netstat -tlnp | grep :9090

# ????
$ clash-cli off && clash-cli on
```

#### ??????
```bash
# ??????
$ clash-cli update log

# ????????
$ curl -I "your-subscription-url"
```

### ????

```bash
# ??????
$ journalctl -u mihomo -f

# ??????
$ clash-cli update log

# ??????
$ tail -f /var/log/syslog | grep clash
```

## ??? ??

???? clash-cli?

```bash
# ?????????
$ sudo bash uninstall.sh

# ??????????
$ sudo systemctl stop mihomo
$ sudo systemctl disable mihomo
$ sudo rm -rf /opt/clash
$ sudo rm -f /etc/systemd/system/mihomo.service
```

## ?? ??

???? Issue ? Pull Request ????????

### ????

1. Fork ???
2. ?????? (`git checkout -b feature/AmazingFeature`)
3. ???? (`git commit -m 'Add some AmazingFeature'`)
4. ????? (`git push origin feature/AmazingFeature`)
5. ?? Pull Request

## ?? ???

????? MIT ??? - ?? [LICENSE](LICENSE) ???????

## ?? ??

?????????

- [mihomo](https://github.com/MetaCubeX/mihomo) - ???? Clash ??
- [subconverter](https://github.com/tindy2013/subconverter) - ??????
- [yacd](https://github.com/haishanh/yacd) - Web ?????
- [yq](https://github.com/mikefarah/yq) - YAML ????

## ? Star History

<a href="https://www.star-history.com/#whillhill/clash-cli&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=whillhill/clash-cli&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=whillhill/clash-cli&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=whillhill/clash-cli&type=Date" />
 </picture>
</a>

## ?? ????

1. ?????????? Shell ????
2. ??????????????????
3. ?????????????????????
4. ????????????????????

---

<div align="center">

**??????????????? ? Star ?????**

Made with ?? by [whillhill](https://github.com/whillhill)

</div>
